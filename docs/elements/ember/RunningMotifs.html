<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-elements/ember/RunningMotifs">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.1.0">
<title data-rh="true">Ember Python Configurations | The Structural Simulation Toolkit</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://sstsimulator.github.io/sst-website/img/sst-logo-small.png"><meta data-rh="true" name="twitter:image" content="https://sstsimulator.github.io/sst-website/img/sst-logo-small.png"><meta data-rh="true" property="og:url" content="https://sstsimulator.github.io/sst-website/docs/elements/ember/RunningMotifs"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Ember Python Configurations | The Structural Simulation Toolkit"><meta data-rh="true" name="description" content="The Python file in Ember specifies:"><meta data-rh="true" property="og:description" content="The Python file in Ember specifies:"><link data-rh="true" rel="icon" href="/sst-website/img/sst-logo-small.png"><link data-rh="true" rel="canonical" href="https://sstsimulator.github.io/sst-website/docs/elements/ember/RunningMotifs"><link data-rh="true" rel="alternate" href="https://sstsimulator.github.io/sst-website/docs/elements/ember/RunningMotifs" hreflang="en"><link data-rh="true" rel="alternate" href="https://sstsimulator.github.io/sst-website/docs/elements/ember/RunningMotifs" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/sst-website/blog/rss.xml" title="The Structural Simulation Toolkit RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/sst-website/blog/atom.xml" title="The Structural Simulation Toolkit Atom Feed">




<script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/sst-website/assets/css/styles.8575e60e.css">
<link rel="preload" href="/sst-website/assets/js/runtime~main.95eb2160.js" as="script">
<link rel="preload" href="/sst-website/assets/js/main.15c51b48.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="theme.common.skipToMainContent"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbar--primary"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/sst-website/"><div class="navbar__logo"><img src="/sst-website/img/sst-logo-small.png" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/sst-website/img/sst-logo-small.png" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">The Structural Simulation Toolkit</b></a><a href="https://sstsimulator.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Main<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><a class="navbar__item navbar__link" href="/sst-website/docs/guides/external/projectDriver">Guides</a><a class="navbar__item navbar__link" href="/sst-website/docs/cpp/component/constructor">SST-Core API</a><a class="navbar__item navbar__link" href="/sst-website/docs/guides/external/projectDriver">Configuration</a><a class="navbar__item navbar__link" href="/sst-website/docs/elements/ember/QuickStart">Elements</a><a class="navbar__item navbar__link" href="/sst-website/docs/tools/commandLine/sst-info">Tools</a><a class="navbar__item navbar__link" href="/sst-website/help">Help</a></div><div class="navbar__items navbar__items--right"><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/sst-website/docs/projectDriver/helpUs">Contribute</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/sst-website/docs/elements/ember/QuickStart">Ember</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sst-website/docs/elements/ember/QuickStart">What is an Ember Motif?</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/sst-website/docs/elements/ember/CreatingMotifs">C++ Ember Motifs</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/sst-website/docs/elements/ember/RunningMotifs">Ember Python Configurations</a></li></ul></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/sst-website/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Ember</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Ember Python Configurations</span><meta itemprop="position" content="2"></li></ul></nav><div class="theme-doc-markdown markdown"><h1>Ember Python Configurations</h1><p>The Python file in Ember specifies:</p><ul><li>How to set up the SST simulation</li><li>Allows multiple configurations to be specified and run</li><li>Loads Motifs into the simulation to be performed.</li></ul><h1>Running Ember</h1><p>Ember uses a python interpreter built into the SST compiler.
<code>sst python-file.py</code> executes the python script.</p><h1>Key Components</h1><p>The python file specifies the format of the SST simulation. The python file specifies components of our simulation such as network Topology, Routers, NetworkInterface and the computation to be performed in the form of Motifs.</p><p>First, we import the necessary components of merlin and set the Platform to firefly defaults.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">import sst</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from sst.merlin.base import *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from sst.merlin.endpoint import *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from sst.merlin.interface import *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from sst.merlin.topology import *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">from sst.ember import *</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">if __name__ == &quot;__main__&quot;:</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    PlatformDefinition.setCurrentPlatform(&quot;firefly-defaults&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Next, we create a topology that our experiment will run on.</p><p><code>topo = topoDragonFly()</code>
Creates a dragonfly topology.
We can then specify parameters about the topology using a dot-operator. e.g.,
<code>topo.num_groups = 4</code></p><h1>Topologies</h1><p>The python file allows the user to specify comparable hardware configurations.
Four different topologies can be specified with different routing algorithms.
Here we give a comprehensive list of the topologies and how they can be initialized.</p><ol><li><p>HyperX <code>topoHyperX</code></p><ul><li><code>shape</code>
Specifies the shape of the mesh. i.e. topo.shape=4x4 or topo.shape=4x4x4. Any number of dimensions is supported.</li><li><code>width</code>
The number of links between routers in each dimension is specified in the same manner as shape.</li><li><code>local_ports</code>
Number of endpoints attached to each router</li><li><code>algorithm</code>
Routing algorithm to use.<ul><li><code>DOAL</code></li><li><code>DOR</code></li><li><code>DOR-ND</code></li><li><code>MIN-A</code></li><li><code>VDAL</code></li><li><code>valiant</code></li></ul></li></ul></li><li><p>Torus <code>topoTorus</code></p><ul><li>Shape
Specifies the mesh grid size, i.e., topo.shape=4x4 or topo.shape=4x4x4. Any number of dimensions is supported.</li><li>Width
Number of links between routers in each dimension, specified in the same way as shape.</li><li>local<!-- -->_<!-- -->ports
Number of endpoints attached to each router</li></ul></li><li><p>Fat Tree <code>topoFatTree</code></p><ul><li><code>shape</code>
The shape of the fat tree. Specified as pair of downlinks and uplinks per level separated by a colon. i.e., topo.shape=&quot;4,2:3,5&quot; specifies the first level has 4 down and 2 up, and the following level has 3 down and 5 up.
If only one number is given, it is interpreted as the number of downlinks and up is set to 0.</li><li><code>routing_alg</code> Routing algorithm to use<ul><li><code>deterministic</code> (default)</li><li><code>adaptive</code></li></ul></li><li><code>adaptive threshold.</code>
The threshold is used to determine if a packet will adaptively route.</li></ul></li><li><p>Dragonfly <code>topoDragonFly</code></p><ul><li><code>hosts_per_router</code>
Number of hosts connected to each router</li><li><code>routers_per_group</code>
The number of links used to connect to routers in the same group.</li><li><code>intergroup_per_router</code>
The number of links per router connected to other groups.</li><li><code>intergroup_links</code>
The number of links between each pair of groups.</li><li><code>num_groups</code>
Number of groups in a network</li><li><code>intergroup_links</code></li><li><code>algorithm</code>
Specifies how each virtual network routes messages.
Specified for each router.vn. i.e., if router.vn=2, than topo.algorithm=<!-- -->[<!-- -->&quot;minimal&quot;, &quot;adaptive-local&quot;], the first router uses minimal, and the second will use adaptive-local.<ul><li><code>minimal</code> (default)\</li><li><code>adaptive_local</code></li><li><code>ugal</code></li><li><code>min-a</code></li><li><code>valiant</code>
Valiant only operates if there are more than two num<!-- -->_<!-- -->groups. Otherwise, there is no point in using valiant routing.</li></ul></li><li><code>adaptive_threshold</code>
Threshold when making adaptive routing decisions.</li><li><code>global_link_map</code>
An array specifying connectivity of global links in each dragonfly group</li><li><code>global_route_mode</code>
Mode for interpreting global link map<ul><li><code>absolute</code> (default)</li><li><code>relative</code></li></ul></li></ul></li></ol><h1>Creating a Router</h1><p>Once the router has been created, the topology needs to be linked to the router. Additionally, the link<!-- -->_<!-- -->latency can be set in the topology at this point.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">topo.router = router</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">topo.link_latency = &quot;20ns&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Parameters for a high radix router or  <code>hr_routers</code>:</p><ul><li><code>id</code>
The ID of the router</li><li><code>num_ports</code>
Number of ports the router has</li><li><code>topology</code>
Name of the topology subcomponent loaded to control routing</li><li><code>xbar_arb</code>
Arbitration unit used for the crossbar. Default is <code>merlin.xbar_arb_lru</code>.</li><li><code>merlin.xbar_arb_lru</code>
Uses Least recently used arbitration for <code>hr_router.</code></li><li><code>merlin.xbar_arb_age</code>
Age-based arbitration unit for <code>hr_router</code></li><li><code>merlin.xbar_arb_lru</code>
Least recently used arbitration unit with infinite crossbar for <code>hr_router</code></li><li><code>merlin.xbar_arb_rand</code>
Random arbitration unit for <code>hr_router</code></li><li><code>merlin.xbar_arb_rr</code>
Round-robin arbitration unit for <code>hr_router</code></li><li><code>link_bw</code>
Bandwidth of the links specified in either b/s or B/s (can include SI prefix)</li><li><code>flit_size</code>
Flit size specified in either b or B</li><li><code>xbar_bw</code>
Bandwidth of the crossbar specified in either b/s or B/s</li><li><code>input_latency</code>
Latency of packets entering switch into input buffers. Specified in s.</li><li><code>output_latency</code>
Latency of packets exiting switch from output buffers. Specified in s.</li><li><code>network_inspectors</code>
Comma-separated list of network inspectors to put on output ports</li><li><code>oql_track_port</code>
Set to true track output queue length for an entire port. False tracks per VC (default).</li></ul><h1>Creating Network Interface</h1><p>Create the network interface:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">networkif = ReorderLinkControl()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The ReorderLinkControl() creates a network interface that can handle out-of-order packet arrival. Events are sequenced, and order is reconstructed on receive.</p><h1>Specifying Computation</h1><p>Initialize the MPIJob to use all the nodes in our topology:</p><p><code>ep = EmberMPIJob(0, topo.getNumNodes())</code>
The network interface then needs to be linked to the <code>ep</code> variable
<code>ep.network_interface = networkif()</code>
Then a series of Motifs can be queued for computation.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ep.addMotif(&quot;Init&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ep.addMotif(&quot;Allreduce&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    ep.addMotif(&quot;Fini&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>The <code>addMotif</code> function adds the specified Motif to a queue. The Motif is named through an SST<!-- -->_<!-- -->ELI<!-- -->_<!-- -->REGISTER<!-- -->_<!-- -->SUBCOMPONENT<!-- -->_<!-- -->DERIVED command in the C++ Motif definition (usually in the include file). The SST<!-- -->_<!-- -->ELI<!-- -->_<!-- -->REGISTER<!-- -->_<!-- -->SUBCOMPONENT<!-- -->_<!-- -->DERIVED parameter follows the naming convention &quot;ExampleMotif&quot;, and to add the Motif to <code>ep</code> using <code>ep.addMotif(&quot;Example&quot;)</code> The &quot;Motif&quot; portion is implied in the naming.
Parameters can be passed to motifs through the string. The parameters are read as a list of assignments, separated by whitespace. For example, a motif &#x27;Sum&#x27; that takes three integers as a parameter named x, y, and z
The Motif would be invoked <code>ep.addMotif(&quot;Sum x=4 y=5 z=6&quot;)</code> would pass the arguments as args.x, args.y, and args.z with assigned values 4, 5, and 6, respectively. The arguments are passed in a Param object to the motif generator to be parsed. </p><p>Some additional functions that can be called on an endpoint or the <code>ep</code> variable:</p><ul><li>getName()
Returns the name of the ep. i.e., it will return &quot;EmberMPIJob&quot;</li><li>enableMotifLog()
Starts logging the Motifs as they are executed.</li></ul><p>Some common MPI-function call motifs that exist in Ember:</p><h1>Running the simulation</h1><p>Finally, we create the &#x27;system&#x27;, which then runs the simulation. The topology is set with the setTopology function, and the endpoint is specified by system.allocateNodes. Build executes the motifs in the endpoint.</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">    system = System()</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    system.setTopology(topo)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    system.allocateNodes(ep,&quot;linear&quot;)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    system.build()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>While most of the System is self-explanatory, the system allows the user to specify how threads/processes are assigned to nodes in the allocateNodes function.
The allocateNodes function allows the user to specify how the nodes are allocated. In the example, &quot;linear&quot; is chosen. In linear, the nodes are sorted, and threads are placed in linear order onto the simulated nodes. There are additional ways to allocate nodes, such as &quot;random&quot;, &quot;interval&quot;, and &quot;indexed&quot;.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/sstsimulator/sst-website/edit/master/docs/../docs/elements/ember/RunningMotifs.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2022-10-14T18:16:28.000Z">Oct 14, 2022</time></b> by <b>Joseph Kenny</b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/sst-website/docs/elements/ember/CreatingMotifs"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">C++ Ember Motifs</div></a></nav></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="/sst-website/img/sst-logo-small.png" class="themedImage_ToTc themedImage--light_HNdA footer__logo"><img src="/sst-website/img/sst-logo-small.png" class="themedImage_ToTc themedImage--dark_i4oU footer__logo"></div><div class="footer__copyright">Copyright © 2022 SST</div></div></div></footer></div>
<script src="/sst-website/assets/js/runtime~main.95eb2160.js"></script>
<script src="/sst-website/assets/js/main.15c51b48.js"></script>
</body>
</html>