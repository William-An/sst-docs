"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[1880],{74514:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>r,toc:()=>d});var s=n(85893),t=n(11151);const o={title:"Debugging Tricks"},l=void 0,r={id:"guides/tips/debugging",title:"Debugging Tricks",description:"Using debugging tools",source:"@site/../docs/guides/tips/debugging.md",sourceDirName:"guides/tips",slug:"/guides/tips/debugging",permalink:"/sst-docs/docs/guides/tips/debugging",draft:!1,unlisted:!1,editUrl:"https://github.com/sstsimulator/sst-docs/edit/master/docs/../docs/guides/tips/debugging.md",tags:[],version:"current",lastUpdatedBy:"Eric Berquist",lastUpdatedAt:1706653318,formattedLastUpdatedAt:"Jan 30, 2024",frontMatter:{title:"Debugging Tricks"},sidebar:"guides",previous:{title:"Compilation Tricks",permalink:"/sst-docs/docs/guides/tips/compilation"},next:{title:"Development",permalink:"/sst-docs/docs/category/development"}},a={},d=[{value:"Using debugging tools",id:"using-debugging-tools",level:2},{value:"GDB/LLDB",id:"gdblldb",level:3},{value:"Links",id:"links",level:4},{value:"Tips",id:"tips",level:4},{value:"Valgrind",id:"valgrind",level:3},{value:"Debug Output",id:"debug-output",level:2},{value:"Dynamic Loading",id:"dynamic-loading",level:3}];function c(e){const i={a:"a",code:"code",h2:"h2",h3:"h3",h4:"h4",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.a)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i.h2,{id:"using-debugging-tools",children:"Using debugging tools"}),"\n",(0,s.jsx)(i.p,{children:"SST utilizes a bootstrapping approach to configure the environment prior to execution.\nThe following approaches may aid in the use of debugging tools.\nThese sections are not meant to be tutorials but instead focus on SST-specific requirements and hints."}),"\n",(0,s.jsx)(i.h3,{id:"gdblldb",children:"GDB/LLDB"}),"\n",(0,s.jsxs)(i.p,{children:[(0,s.jsx)(i.code,{children:"gdb"}),", the GNU debugger, is useful for stepping through compiled code, looking at the contents of variables,\nand viewing backtraces for segmentation faults.\n",(0,s.jsx)(i.code,{children:"lldb"}),", the LLVM debugger, is mostly equivalent and available on macOS."]}),"\n",(0,s.jsx)(i.h4,{id:"links",children:"Links"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://developers.redhat.com/blog/2021/04/30/the-gdb-developers-gnu-debugger-tutorial-part-1-getting-started-with-the-debugger",children:"GDB tutorial"})}),"\n",(0,s.jsx)(i.li,{children:(0,s.jsx)(i.a,{href:"https://lldb.llvm.org/use/map.html",children:"LLDB to GDB command map"})}),"\n"]}),"\n",(0,s.jsx)(i.h4,{id:"tips",children:"Tips"}),"\n",(0,s.jsxs)(i.ul,{children:["\n",(0,s.jsx)(i.li,{children:"Using the latest version of GDB rather than the one installed with your operating system may enable better backtraces."}),"\n",(0,s.jsxs)(i.li,{children:["In order to view source code information such as variable names and line numbers, ensure all SST code of interest is compiled with ",(0,s.jsx)(i.a,{href:"https://en.wikipedia.org/wiki/Debug_symbol",children:"debugging symbols"}),". Additionally, compiling with optimizations (",(0,s.jsx)(i.code,{children:"-O2"})," or ",(0,s.jsx)(i.code,{children:"-O3"}),") can lead to variable contents not being available. With Autotools, compile using ",(0,s.jsx)(i.code,{children:'CFLAGS="-g3 -O0" CXXFLAGS="-g3 -O0" /path/to/configure ...'}),". With CMake, compile using ",(0,s.jsx)(i.code,{children:"-DCMAKE_BUILD_TYPE=Debug"}),"."]}),"\n",(0,s.jsxs)(i.li,{children:["If you want to set a breakpoint on an exception being thrown and you aren't sure of its location, use","\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"(gdb) catch throw\n"})}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(i.h3,{id:"valgrind",children:"Valgrind"}),"\n",(0,s.jsx)(i.p,{children:"If you are using Valgrind for debugging then the tool must be configured to follow child processes.\nAn example command is shown below."}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{className:"language-bash",children:"valgrind --trace-children=yes <path to SST>/bin/sst mysstmodel.py\n"})}),"\n",(0,s.jsx)(i.h2,{id:"debug-output",children:"Debug Output"}),"\n",(0,s.jsx)(i.h3,{id:"dynamic-loading",children:"Dynamic Loading"}),"\n",(0,s.jsxs)(i.p,{children:["Installing multiple verions of libraries and executables commonly leads to runtime errors if search paths are misconfigured.\nSetting the ",(0,s.jsx)(i.code,{children:"SST_CORE_DL_VERBOSE"})," environment variable can be helpful to diagnose dynamic linking problems."]}),"\n",(0,s.jsx)(i.pre,{children:(0,s.jsx)(i.code,{children:"[user1@localhost tests]$ SST_CORE_DL_VERBOSE=1 sst testStdMem.py\nSST-DL: Searching: /home/user1/install/sst-core/lib/sst\nSST-DL: Attempting to load /home/user1/install/sst-core/lib/sst/libmemHierarchy.so\nSST-DL: Loading failed, error: /home/user1/install/sst-core/lib/sst/libmemHierarchy.so: cannot open shared object file: No such file or directory\nSST-DL: Searching: /home/user1/install/sst-core/lib/sstcore\nSST-DL: Attempting to load /home/user1/install/sst-core/lib/sstcore/libmemHierarchy.so\nSST-DL: Loading failed, error: /home/user1/install/sst-core/lib/sstcore/libmemHierarchy.so: cannot open shared object file: No such file or directory\nSST-DL: Searching: /home/user1/install/sst-elements/lib/sst-elements-library\nSST-DL: Attempting to load /home/user1/install/sst-elements/lib/sst-elements-library/libmemHierarchy.so\nSST-DL: Load was successful.\n"})})]})}function u(e={}){const{wrapper:i}={...(0,t.a)(),...e.components};return i?(0,s.jsx)(i,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},11151:(e,i,n)=>{n.d(i,{Z:()=>r,a:()=>l});var s=n(67294);const t={},o=s.createContext(t);function l(e){const i=s.useContext(o);return s.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function r(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),s.createElement(o.Provider,{value:i},e.children)}}}]);