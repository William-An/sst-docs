"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[6197],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>d});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},m="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},k=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,s=e.originalType,p=e.parentName,l=a(e,["components","mdxType","originalType","parentName"]),m=c(n),k=o,d=m["".concat(p,".").concat(k)]||m[k]||u[k]||s;return n?r.createElement(d,i(i({ref:t},l),{},{components:n})):r.createElement(d,i({ref:t},l))}));function d(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var s=n.length,i=new Array(s);i[0]=k;var a={};for(var p in t)hasOwnProperty.call(t,p)&&(a[p]=t[p]);a.originalType=e,a[m]="string"==typeof e?e:o,i[1]=a;for(var c=2;c<s;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}k.displayName="MDXCreateElement"},58247:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>p,contentTitle:()=>i,default:()=>u,frontMatter:()=>s,metadata:()=>a,toc:()=>c});var r=n(87462),o=(n(67294),n(3905));const s={title:"NetworkInspector"},i=void 0,a={unversionedId:"core/iface/SimpleNetwork/NetworkInspector",id:"core/iface/SimpleNetwork/NetworkInspector",title:"NetworkInspector",description:"A NetworkInspector is a SubComponent that can be used to inspect events that are in-flight throughout a network. A library that sends Requests through a network, which wrap an Event type custom to that library, can implement a NetworkInspector capable of returning information about the Request and the wrapped custom Event.",source:"@site/../docs/core/iface/SimpleNetwork/NetworkInspector.md",sourceDirName:"core/iface/SimpleNetwork",slug:"/core/iface/SimpleNetwork/NetworkInspector",permalink:"/sst-docs/docs/core/iface/SimpleNetwork/NetworkInspector",draft:!1,editUrl:"https://github.com/sstsimulator/sst-docs/edit/master/docs/../docs/core/iface/SimpleNetwork/NetworkInspector.md",tags:[],version:"current",lastUpdatedBy:"grvosku",lastUpdatedAt:1684522150,formattedLastUpdatedAt:"May 19, 2023",frontMatter:{title:"NetworkInspector"},sidebar:"core",previous:{title:"Handler",permalink:"/sst-docs/docs/core/iface/SimpleNetwork/handler"},next:{title:"Request",permalink:"/sst-docs/docs/core/iface/SimpleNetwork/Request"}},p={},c=[{value:"Requirements",id:"requirements",level:2},{value:"NetworkInspector",id:"networkinspector",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Examples",id:"examples",level:2},{value:"Example 1: Supporting NetworkInspectors in a network",id:"example-1-supporting-networkinspectors-in-a-network",level:3},{value:"Example 2: Implementing a NetworkInspector",id:"example-2-implementing-a-networkinspector",level:3},{value:"Header",id:"header",level:2}],l={toc:c},m="wrapper";function u(e){let{components:t,...n}=e;return(0,o.kt)(m,(0,r.Z)({},l,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"class NetworkInspector : public SubComponent\n{\npublic:\n    SST_ELI_REGISTER_SUBCOMPONENT_ELI(SST::Interfaces::SimpleNetwork::NetworkInspector, std::string)\n\n    NetworkInspector(ComponentId_t id) : SubComponent(id) {}\n\n    virtual ~NetworkInspector() {}\n\n    virtual void inspectNetworkData(Request* req) = 0;\n};\n")),(0,o.kt)("p",null,"A NetworkInspector is a SubComponent that can be used to inspect events that are in-flight throughout a network. A library that sends Requests through a network, which wrap an Event type custom to that library, can implement a NetworkInspector capable of returning information about the Request and the wrapped custom Event. "),(0,o.kt)("h2",{id:"requirements"},"Requirements"),(0,o.kt)("p",null,(0,o.kt)("strong",{parentName:"p"},"Network interface")," ","\xa0",(0,o.kt)("br",{parentName:"p"}),"\n","Networks that support the SimpleNetwork API are not required to support inspection. If they do, they should use this SubComponent API. To support NetworkInspector, network components (e.g., SimpleNetwork interfaces, routers) throughout the network should support loading NetworkInspector SubComponents, and should call the ",(0,o.kt)("inlineCode",{parentName:"p"},"inspectNetworkData()")," function when a Request is encountered."),(0,o.kt)("h3",{id:"networkinspector"},"NetworkInspector"),(0,o.kt)("p",null,"Perform some inspection when the ",(0,o.kt)("inlineCode",{parentName:"p"},"inspectNetworkData")," function is called. For example, update a statistic or generate output. Do not modify the Request."),(0,o.kt)("h2",{id:"parameters"},"Parameters"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"returns")," none")),(0,o.kt)("h2",{id:"examples"},"Examples"),(0,o.kt)("h3",{id:"example-1-supporting-networkinspectors-in-a-network"},"Example 1: Supporting NetworkInspectors in a network"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Excerpt from sst-elements/src/sst/elements/merlin/interfaces/portControl.h"',title:'"Excerpt',from:!0,'sst-elements/src/sst/elements/merlin/interfaces/portControl.h"':!0},'#include <sst/core/interfaces/simpleNetwork.h>\n\nclass PortControl : public PortInterface {\npublic:\n    \n    /* ELI macros */\n\n    SST_ELI_DOCUMENT_SUBCOMPONENT_SLOTS(\n        //highlight-next-line\n        {"inspector_slot", "Network inspectors", "SST::Interfaces::SimpleNetwork::NetworkInspector"}\n        /* Other subcomponent slots */\n    )\n\nprivate:\n    /* Class members */\n    //highlight-next-line\n    std::vector<SST::Interfaces::SimpleNetwork::NetworkInspector*> network_inspectors;\n};\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Excerpt from sst-elements/src/sst/elements/merlin/interfaces/portControl.cc"',title:'"Excerpt',from:!0,'sst-elements/src/sst/elements/merlin/interfaces/portControl.cc"':!0},'PortControl::PortControl(ComponentId_t cid, Params& params, /* Other function parameters */) :\n    PortInterface(cid), /* Other variable initialization */ {\n        /* Other constructor code */\n\n        // Create any NetworkInspectors\n        for ( unsigned int i = 0; i < inspector_names.size(); i++ ) {\n            Params empty;\n            //highlight-next-line\n            SimpleNetwork::NetworkInspector* ni = loadAnonymousSubComponent<SimpleNetwork::NetworkInspector>\n                (inspector_names[i], "inspector_slot", i, ComponentInfo::INSERT_STATS, empty, port_name);\n            if ( ni == NULL ) {\n                merlin_abort.fatal(CALL_INFO, 1, "NetworkInspector: %s, not found.\\n", inspector_names[i].c_str());\n            }\n            network_inspectors.push_back(ni);\n        }\n\n        /* More constructor code */\n}\n\n/* handle_output is called when an event is ready to be sent on the PortControl\'s link */\nint PortControl::handle_output(Event* ev) {\n    /* Code to locate the event to send, \'send_event\' and prepare it */\n\n    // Also send the request to all registered NetworkInspectors\n    for ( unsigned int i = 0; i < network_inspectors.size(); i++ ) {\n        //highlight-next-line\n        network_inspectors[i]->inspectNetworkData(send_event->inspectRequest());\n    }\n\n    /* Code to send the event */\n}\n')),(0,o.kt)("h3",{id:"example-2-implementing-a-networkinspector"},"Example 2: Implementing a NetworkInspector"),(0,o.kt)("p",null,"This inspector counts the number of packets sent on a link. Each time the network calls ",(0,o.kt)("inlineCode",{parentName:"p"},"inspectNetworkData"),", it increments a statistic."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Excerpt from sst-elements/src/sst/elements/merlin/inspectors/testInspector.h"',title:'"Excerpt',from:!0,'sst-elements/src/sst/elements/merlin/inspectors/testInspector.h"':!0},'#include <sst/core/interfaces/simpleNetwork.h>\n\nclass TestNetworkInspector : public SimpleNetwork::NetworkInspector {\npublic:\n    SST_ELI_REGISTER_SUBCOMPONENT(\n        TestNetworkInspector,\n        "merlin",\n        "test_network_inspector",\n        SST_ELI_ELEMENT_VERSION(1,0,0),\n         "Used to test NetworkInspector functionality.  Duplicates send_packet_count in hr_router.",\n        SST::Interfaces::SimpleNetwork::NetworkInspector)\n\n    SST_ELI_DOCUMENT_STATISTICS(\n        { "test_count", "Count number of packets sent on link", "packets", 1}\n    )\n\nprivate:\n    Statistic<uint64_t>* test_count;\npublic:\n    TestNetworkInspector(ComponentId_t id, Params& params, const std::string& sub_id);\n\n    void inspectNetworkData(SimpleNetwork::Request* req);\n};\n')),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp",metastring:'title="Excerpt from sst-elements/src/sst/elements/merlin/inspectors/testInspector.cc"',title:'"Excerpt',from:!0,'sst-elements/src/sst/elements/merlin/inspectors/testInspector.cc"':!0},' TestNetworkInspector::TestNetworkInspector(ComponentId_t id, Params& params, const std::string& sub_id) :\n        SimpleNetwork::NetworkInspector(id)\n{\n    test_count = registerStatistic<uint64_t>("test_count", sub_id);\n}\n\nvoid TestNetworkInspector::inspectNetworkData(SimpleNetwork::Request* req) {\n    test_count->addData(1);\n}\n\n')),(0,o.kt)("h2",{id:"header"},"Header"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-cpp"},"#include <sst/core/interfaces/simpleNetwork.h>\n")))}u.isMDXComponent=!0}}]);